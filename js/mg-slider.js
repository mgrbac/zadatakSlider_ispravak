"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value" in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0})}else{obj[key]=value}return obj}
var MGSlider=function(){function MGSlider(options){_classCallCheck(this,MGSlider);_defineProperty(this,"slider",null);_defineProperty(this,"sliderWrapper",null);_defineProperty(this,"slidesCurrent",null);_defineProperty(this,"slidesOrig",null);_defineProperty(this,"btnPrev",null);_defineProperty(this,"btnNext",null);_defineProperty(this,"activeSlide",null);_defineProperty(this,"lastSlide",null);_defineProperty(this,"firstSlide",null);_defineProperty(this,"slideWidth",null);_defineProperty(this,"slideMargin",null);_defineProperty(this,"positionX",0);_defineProperty(this,"defaultOptions",{selectors:{sliderId:'slider-1',btnPrevId:'slide-prev',btnNextId:'slide-next'},classes:{activeSlide:'active'},debug:!1});this.options=$.extend(!0,{},this.defaultOptions,options);this.setElements();this.initSlider()}
_createClass(MGSlider,[{key:"calcElementWidth",value:function calcElementWidth(el){return parseFloat(el.outerWidth())}},{key:"calcElementMargin",value:function calcElementMargin(el){return parseFloat(el.css('marginLeft'))}},{key:"getCurrentSlides",value:function getCurrentSlides(){return $('#'+this.options.selectors.sliderId+' .slider-wrapper .slide').length?$('#'+this.options.selectors.sliderId+' .slider-wrapper .slide'):null}},{key:"updateCurrentSlides",value:function updateCurrentSlides(){this.slidesCurrent=this.getCurrentSlides()}},{key:"prependLastEl",value:function prependLastEl(slides){this.lastSlide=slides.last();this.lastSlide.prependTo(this.sliderWrapper);this.updateCurrentSlides()}},{key:"appendFirstEl",value:function appendFirstEl(slides){this.firstSlide=slides.first();this.firstSlide.appendTo(this.sliderWrapper);this.updateCurrentSlides()}},{key:"removeActiveClass",value:function removeActiveClass(slide){if(slide){slide.removeClass(this.options.classes.activeSlide)}}},{key:"setActiveSlide",value:function setActiveSlide(slide){if(slide){this.removeActiveClass(this.activeSlide);slide.addClass(this.options.classes.activeSlide);this.activeSlide=slide}}},{key:"slidePrev",value:function slidePrev(){var _this=this;this.lastSlide=this.slidesCurrent.last();this.slideWidth=this.calcElementWidth(this.lastSlide);this.slideMargin=this.calcElementMargin(this.lastSlide);var newPositionX=-this.slideWidth-this.slideMargin;this.positionX=newPositionX;this.sliderWrapper.animate({marginRight:0},500,function(){_this.sliderWrapper.css('marginRight',_this.positionX);_this.prependLastEl(_this.slidesCurrent);_this.btnPrev.prop('disabled',!1)});this.setActiveSlide(this.activeSlide.prev())}},{key:"slideNext",value:function slideNext(){var _this2=this;this.slideWidth=this.calcElementWidth(this.activeSlide);this.slideMargin=this.calcElementMargin(this.activeSlide);var newPositionX=this.positionX-this.slideWidth-this.slideMargin;this.positionX=-this.slideWidth-this.slideMargin;this.setActiveSlide(this.activeSlide.next());this.sliderWrapper.animate({marginRight:newPositionX},500,function(){_this2.sliderWrapper.css('marginRight',_this2.positionX);_this2.appendFirstEl(_this2.slidesCurrent);_this2.btnNext.prop('disabled',!1)})}},{key:"initEvents",value:function initEvents(){var _this3=this;var btnPrevEl=this.btnPrev;var btnNextEl=this.btnNext;if(btnPrevEl){btnPrevEl.on('click',function(){btnPrevEl.prop('disabled',!0);_this3.slidePrev()})}
if(btnNextEl){btnNextEl.on('click',function(){btnNextEl.prop('disabled',!0);_this3.slideNext()})}}},{key:"initSlider",value:function initSlider(){if(!this.slider){this.logCall('missing slider node: #'+this.options.selectors.sliderId);return}
if(!this.slidesOrig){this.logCall('missing slides');return}
this.setActiveSlide(this.slidesOrig.first());this.prependLastEl(this.slidesOrig);this.positionX=-this.calcElementWidth(this.lastSlide)-this.calcElementMargin(this.lastSlide);this.sliderWrapper.css('marginRight',this.positionX);this.initEvents()}},{key:"setElements",value:function setElements(){this.slider=$('#'+this.options.selectors.sliderId).length?$('#'+this.options.selectors.sliderId):null;this.sliderWrapper=$('#'+this.options.selectors.sliderId+' .slider-wrapper').length?$('#'+this.options.selectors.sliderId+' .slider-wrapper'):null;this.slidesOrig=$('#'+this.options.selectors.sliderId+' .slider-wrapper .slide').length?$('#'+this.options.selectors.sliderId+' .slider-wrapper .slide'):null;this.btnPrev=$('#'+this.options.selectors.btnPrevId).length?$('#'+this.options.selectors.btnPrevId):null;this.btnNext=$('#'+this.options.selectors.btnNextId).length?$('#'+this.options.selectors.btnNextId):null}}]);return MGSlider}()
